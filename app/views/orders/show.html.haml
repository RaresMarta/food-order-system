- provide(:title, "Order ##{@order.id}")

%section.dashboard-hero
  .background
  .hero-content

.content-wrapper
  .row
    .col-12.mb-4
      .d-flex.align-items-center.gap-3
        = link_to orders_path, class: "btn btn-outline-secondary btn-sm" do
          %i.bi.bi-arrow-left Back
        %h1.mb-0 Order ##{@order.id}

  .row
    .col-lg-8
      .card.border-0.shadow-sm
        .card-header.bg-light
          %h5.mb-0 Items Ordered
        .card-body
          - @order.order_items.each do |item|
            .d-flex.align-items-center.gap-4.py-3.border-bottom
              .image-placeholder{style: "width: 60px; height: 60px; background-color: #f8f9fa; border-radius: 4px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;"}
                - if item.food_item.image.attached?
                  = image_tag item.food_item.image, alt: item.food_item.name, style: "width: 60px; height: 60px; object-fit: cover; border-radius: 4px;"
                - else
                  %small.text-muted No image
              .flex-grow-1
                %h6.mb-1= item.food_item.name
                - if item.food_item.respond_to?(:description)
                  %p.text-muted.small.mb-1= item.food_item.description
                %small.text-muted #{number_to_currency(item.unit_price)} each
              .text-end
                %div Qty: #{item.quantity}
                %strong= number_to_currency(item.unit_price * item.quantity)

    .col-lg-4
      .card.border-0.shadow-sm.mb-4
        .card-header.bg-light
          %h5.mb-0 Order Information
        .card-body
          .mb-3
            %h6.text-muted.small Order Date
            %p.mb-1= @order.created_at.strftime("%B %d, %Y")
            %small.text-muted= @order.created_at.strftime("%I:%M %p")
          .mb-3
            %h6.text-muted.small Status
            %span.badge{class: order_status_badge_class(@order.status)}= @order.status.humanize
          .mb-0
            %h6.text-muted.small Payment Method
            %p.mb-0= @order.payment_method.humanize

      .d-flex.gap-2
        - unless @order.delivered? || @order.canceled?
          %button.btn.btn-danger.flex-fill Cancel Order
        = link_to "Order Again", root_path, class: "btn btn-primary flex-fill"
