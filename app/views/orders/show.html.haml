- provide(:title, "Order ##{@order.id}")

%section.dashboard-hero
  .background
  .hero-content

.container.py-4
  .row
    .col-12.mb-4
      .d-flex.align-items-center.gap-3
        = link_to orders_path, class: "btn btn-outline-secondary btn-sm" do
          .bi.bi-arrow-left Back
        %h1.mb-0 Order ##{@order.id}

  .row
    .col-lg-8
      .card.border-0.shadow-sm
        .card-header.bg-light
          %h5.mb-0 Items Ordered
        .card-body
          = render partial: "order_items", locals: { order: @order }

    .col-lg-4
      .card.border-0.shadow-sm.mb-4
        .card-header.bg-light
          %h5.mb-0 Order Information
        .card-body
          .mb-3
            %h6.text-muted.small Order Date
            %p.mb-1= @order.created_at.strftime("%I:%M %p, %B %d, %Y")
          .mb-3
            %h6.text-muted.small Status
            %span.badge{class: order_status_class(@order.status)}= @order.status.humanize
          .mb-3
            %h6.text-muted.small Total Amount
            %p.mb-0
              %strong= number_to_currency(@order.total_price)
          .mb-0
            %h6.text-muted.small Payment Method
            %p.mb-0= @order.payment_method.humanize

      .d-flex.gap-2
        - if @order.preparing?
          = button_to "Cancel Order", order_path(@order, status: :canceled), method: :patch, class: "btn btn-danger flex-fill", data: { turbo_confirm: "Are you sure you want to cancel this order?" }
        = button_to "Order Again", cart_items_path, params: { order_id: @order.id }, method: :post, class: "btn btn-primary flex-fill"
