- provide(:title, "Food")

%div{ data: { controller: "home" } }
  %section.hero
    .background
    .hero-content
      %h1 Ordering food
      .divider
        %span.divider-line
        %span.divider-icon
        %span.divider-line
      %p
        Delicious meals, crafted with care and delivered to your door.
        %br/
        Eureka Caffe â€” simple, satisfying, and just one order away.

  %section.filter-bar
    .content-wrapper.filter-bar-content
      = form_with url: root_path,
                  method: :get,
                  data:   { turbo_frame: "food_grid", controller: "home" },
                  local:  true do

        .dropdowns-container
          .custom-dropdown
            = label_tag :category, "CATEGORY", class: "dropdown-label"
            = select_tag :category,
                options_for_select(category_options, params[:category]),
                data: { home_target: "category" }

          .custom-dropdown
            = label_tag :sort, "SORTING", class: "dropdown-label"
            = select_tag :sort,
                options_for_select(sort_options, params[:sort]),
                data: { home_target: "sort" }

          .custom-dropdown
            = label_tag :vegetarian, class: "vegetarian-label" do
              = check_box_tag :vegetarian, "true",
                              params[:vegetarian].present?,
                              data: { home_target: "veg",
                                      action: "change->home#applyFilters" }
              %span VEGETARIAN

        .price-range-container
          .price-label PRICE
          .price-slider-wrapper
            %span.min-price{ data: { home_target: "minLabel" } }= params[:min] || 0

            .slider-container
              %input#price-range-min{
                type:  "range",
                name:  "min",
                value: params[:min] || 0,
                min: 0, max: 100, step: 1,
                data: { home_target: "min",
                        action: "input->home#filterChanged" }
              }
              %input#price-range-max{
                type:  "range",
                name:  "max",
                value: params[:max] || 100,
                min: 0, max: 100, step: 1,
                data: { home_target: "max",
                        action: "input->home#filterChanged" }
              }

              .slider-track
              .slider-range{ data: { home_target: "sliderRange" } }
              .slider-thumb.left{  data: { home_target: "thumbLeft"  } }
              .slider-thumb.right{ data: { home_target: "thumbRight" } }

            %span.max-price{ data: { home_target: "maxLabel" } }= params[:max] || 100

        .filter-submit
          = submit_tag "Apply Filters", class: "filter-button"

  %turbo-frame#food-grid.content-wrapper
    %section.food-grid
      = render partial: "shared/grid", locals: { food_items: @food_items }
